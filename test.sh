#!/bin/bash

# 设置请求的 URL
URL="http://127.0.0.1:8001/backend-api/conversation"

# 设置token
TOKEN="1c0b193c-d412-41ee-a96f-5435f6c1d2e8"

# 设置请求体数据
DATA='{
    "action": "next",
    "messages": [
        {
            "id": "08e897bc-c610-4ac4-ac30-7be96e17331e",
            "author": {
                "role": "user"
            },
            "content": {
                "content_type": "text",
                "parts": [
                    "我有一段长文本，里边包含了一篇或者多篇作文范文，当然里边还混杂了一些无关文字，比如作文考题、作文点评、作文赏析之类的。我想让你帮我：1、把每一篇范文从这段长文本中筛选出来，并对格式进行规整，主要是识别出每篇范文的主题和正文。注意正文文字部分全部保留，不要省略正文文字2、正文中各段落之间的换行符需要保留，但请注意识别那些不正常的符号，并把它们去掉。3、此外，我还需要你为正文内容（实际上那就是一篇范文）生成一个prompt，能够生成这篇范文。我可以给你几个例子，你可以仿照这些例子来生成prompt：示例1：请以XXXX为主题，写一篇[####]作文。示例2：帮我写一篇[####]作文，内容关于XXXX。示例3：帮我写一篇[####]作文，主题是XXXX。示例4：你能帮我写一篇关于XXXX的[####]作文吗？注：以上示例中XXXX指的是作文主题，[####]指的是作文体裁，可以是议论文、记叙文、书信、想象作文、说明文等常见高考作文体裁中的一种，这个需要你根据正文内容来识别和选择。4、生成的prompt要有泛化性、抽象性，不能只是简单地总结这篇范文或过多出现范文中细节，建议prompt的长度控制在30~200字之间。5、我要求的所有结果以json格式返回，主题(命名为Title)、正文(命名为Body)、prompt(命名为Prompt)各占一个字段。长文本中若有一篇范文就返回一条json数据，若有多篇范文就返回多条json数据。但请你必须注意，在我即将给你的长文本中不管是包含单篇范文还是包含多篇范文，你都应该尽可能地保留正文内容，千万不要偷懒省略正文当中的文字，这点请你格外注意。6、请你直接输出json格式的数据即可，无需输出其他文字。以下是这段长文本：巍巍高山，有诚乃大  --守候心灵的净土  言必信，行必果。这句话从司马迁的史记中翩然而下，落到了我的心坎里。面对现代社会的花花绿绿，尽管有些人会嘲笑我的愚蠢。但是，我依然守候着我的原则，守候着我心灵的净土。  有些人活着，但是他已经死了，有些人死了，但是他还活着。舍弃信义的人，或许会获得眼前的利益，但是他的人格已经有了污点，是无法与巍巍高山般的贤人们相提并论的。人生短暂，寄蜉蝣于天地，渺沧海之一粟。哀吾生之须臾，羡长江之无穷。东坡美文流传至今，但是其人而今安在哉?<面对如此珍贵短暂的生命，难不成我们要在污点中度过?你这辈子到底在追求什么?金钱?权位?百年之后，尽归尘土。能够流传下来的，唯有一世清明。世人们所赞叹从来不是什么<小聪明<。而是那巍巍高山般的人品。汪精卫背信弃义，出卖祖国，即使留名史册，但那终归是骂名。而活在芸芸众生之中的<草根<们，却可以因诚助人，永远活在受到荫护的人们心中。  面对诚信与非诚，你会选择什么?这么多年来，在学校里，在网络上。我总是充当一个<受骗者<的角色。有人说我，我太轻信人了，答应的事情都会兑现，但是对方可不一定，所以，做人还是要<成熟<一点啊。面对这样的言论，我不予争论，我依然会守候着我心灵的净土。我想，那些不诚者是因为我可以因不诚而获利，却可以不受到惩罚。可是他们又哪里知道，人是有气质的。一个人不诚信，一次也好，两次也好，久而久之，这辈子都摆脱不了一种低俗的气质了，而我是祖国的未来，我的目标是巍巍高山，而不是一座小土丘。这个世界上，善良的人总比恶人多，我坚持诚信，我周围聚集起来的人都是诚信者，我们会一起散发出耀目的光芒，我们终究会点亮整个世界。  我待人真诚，做事可靠，我是要受到大家们的赞美与敬仰，我生当立壮志，我是高山，我是雄鹰，我要翱翔。我不会做出任何不诚的事情，因为我的高傲，更因为我的自尊。面对不诚者，我不会去指责他们，我要因我的言行去感化他们。哪怕我会去做一辈子的<受骗者<我也心甘情愿。因为我相信，我们终将会点亮整个世界。  春意散去，夏意归来。巍巍高山，有诚乃大。  诚者，立身之根本也!"
                ]
            }
        }
    ],
    "parent_message_id": "1d46d519-c4a5-4676-a62f-a531dc1e81dd",
    "model": "gpt-4",
    "timezone_offset_min": -480
}'

# 发起 POST 请求，并指定请求体为 JSON 格式
curl -X POST \
     -H "Content-Type: application/json" \
     -H "Authorization: Bearer $TOKEN" \
     -d "$DATA" \
     "$URL"
